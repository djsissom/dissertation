
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Automation
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Automation}
\label{sec:automation}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


Dealing with the large number of data files, programs, and pipeline steps used in our analysis quickly becomes prohibitive in terms of time and complexity when each must be dealt with completely ``by hand.''  In order to shorten the time needed for a full analysis of the data down to a reasonably human-scale level, a certain level of automation is required.  A combination of shell scripting and basic parallelization was used to this effect.  This has the added benefit of providing a self-documenting reproducibility to the analysis that was invaluable for the inevitable times when an error was discovered and the entire pipeline had to be re-run from the beginning.  In this section, we will give a very brief summary of the automation steps taken and the scripts written for these tasks.  Scripts run locally or launched manually are written in Bash, while job scripts that are submitted to the ACCRE compute cluster use the PBS syntax for communication with the scheduler and Bash for the remaining logic.

The creation of the directory structure for analysis with \rockstar\ and subsequent halo catalog generation steps was done using the script listed in Appendix~\ref{app:setup}.  The creation of the directory structure for \crossmatch\ was done using the script listed in \ref{app:crossmatch_setup}.  Individual instances of \rockstar\ may be run on individual snapshots with the script in Appendix~\ref{app:begin_run}, while all snapshots may be run as a batch job using the scripts in Appendices~\ref{app:run_2lpt} and~\ref{app:run_za} for \lpt\ and \za\ snapshots, respectively.  The output from \rockstar\ is run through a post-processing step that is automated using the script in Appendix~\ref{app:postprocess_all}.  The \crossmatch\ program is run with the script in Appendix~\ref{app:run_crossmatch}, and the python code to generate density profiles is launched with the script in Appendix~\ref{app:run_density_profile}.  A number of other Bash scripts, PBS submission scripts, and Python programs, which we have already discussed in the above sections, were used for automation of the remainder of the analysis pipeline.




